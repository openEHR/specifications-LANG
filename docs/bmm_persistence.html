<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="description" content="BMM Persistence (P_BMM)">
<meta name="keywords" content="reflection, meta-model, UML">
<title>BMM Persistence (P_BMM) Model and Syntax</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_bmm_persistence_p_bmm_model_and_syntax">BMM Persistence (P_BMM) Model and Syntax</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_primary_author">Primary Author</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_status">1.2. Status</a></li>
<li><a href="#_feedback">1.3. Feedback</a></li>
<li><a href="#_conformance">1.4. Conformance</a></li>
<li><a href="#_tooling">1.5. Tooling</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_conceptual_approach">2.1. Conceptual Approach</a></li>
<li><a href="#_concrete_format">2.2. Concrete Format</a></li>
</ul>
</li>
<li><a href="#_persistence_package">3. Persistence Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">3.1. Overview</a></li>
<li><a href="#_class_definitions">3.2. Class Definitions</a>
<ul class="sectlevel3">
<li><a href="#_p_bmm_model_element_class">3.2.1. P_BMM_MODEL_ELEMENT Class</a></li>
<li><a href="#_p_bmm_package_container_class">3.2.2. P_BMM_PACKAGE_CONTAINER Class</a></li>
<li><a href="#_p_bmm_schema_class">3.2.3. P_BMM_SCHEMA Class</a></li>
<li><a href="#_p_bmm_package_class">3.2.4. P_BMM_PACKAGE Class</a></li>
<li><a href="#_p_bmm_type_class">3.2.5. P_BMM_TYPE Class</a></li>
<li><a href="#_p_bmm_class_class">3.2.6. P_BMM_CLASS Class</a></li>
<li><a href="#_p_bmm_generic_parameter_class">3.2.7. P_BMM_GENERIC_PARAMETER Class</a></li>
<li><a href="#_p_bmm_property_class">3.2.8. P_BMM_PROPERTY Class</a></li>
<li><a href="#_p_bmm_base_type_class">3.2.9. P_BMM_BASE_TYPE Class</a></li>
<li><a href="#_p_bmm_simple_type_class">3.2.10. P_BMM_SIMPLE_TYPE Class</a></li>
<li><a href="#_p_bmm_open_type_class">3.2.11. P_BMM_OPEN_TYPE Class</a></li>
<li><a href="#_p_bmm_generic_type_class">3.2.12. P_BMM_GENERIC_TYPE Class</a></li>
<li><a href="#_p_bmm_container_type_class">3.2.13. P_BMM_CONTAINER_TYPE Class</a></li>
<li><a href="#_p_bmm_indexed_container_type_class">3.2.14. P_BMM_INDEXED_CONTAINER_TYPE Class</a></li>
<li><a href="#_p_bmm_single_property_class">3.2.15. P_BMM_SINGLE_PROPERTY Class</a></li>
<li><a href="#_p_bmm_single_property_open_class">3.2.16. P_BMM_SINGLE_PROPERTY_OPEN Class</a></li>
<li><a href="#_p_bmm_generic_property_class">3.2.17. P_BMM_GENERIC_PROPERTY Class</a></li>
<li><a href="#_p_bmm_container_property_class">3.2.18. P_BMM_CONTAINER_PROPERTY Class</a></li>
<li><a href="#_p_bmm_indexed_container_property_class">3.2.19. P_BMM_INDEXED_CONTAINER_PROPERTY Class</a></li>
<li><a href="#_p_bmm_enumeration_class">3.2.20. P_BMM_ENUMERATION Class</a></li>
<li><a href="#_p_bmm_enumeration_string_class">3.2.21. P_BMM_ENUMERATION_STRING Class</a></li>
<li><a href="#_p_bmm_enumeration_integer_class">3.2.22. P_BMM_ENUMERATION_INTEGER Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_bmm_persistence_syntax">4. BMM Persistence Syntax</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">4.1. Overview</a></li>
<li><a href="#_header_items">4.2. Header Items</a></li>
<li><a href="#_inclusions">4.3. Inclusions</a></li>
<li><a href="#_package_definition">4.4. Package Definition</a></li>
<li><a href="#_class_definitions_2">4.5. Class Definitions</a>
<ul class="sectlevel3">
<li><a href="#_classes_for_primitive_types">4.5.1. Classes for Primitive Types</a></li>
<li><a href="#_non_primitive_classes">4.5.2. Non-primitive Classes</a></li>
<li><a href="#_simple_classes">4.5.3. Simple Classes</a>
<ul class="sectlevel4">
<li><a href="#_class_properties">4.5.3.1. Class properties</a></li>
<li><a href="#_container_properties">4.5.3.2. Container Properties</a></li>
</ul>
</li>
<li><a href="#_generic_classes">4.5.4. Generic Classes</a></li>
<li><a href="#_enumerated_types">4.5.5. Enumerated Types</a></li>
<li><a href="#_value_set_constraints">4.5.6. Value-set Constraints</a></li>
</ul>
</li>
<li><a href="#_inheritance">4.6. Inheritance</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://specifications.openehr.org/images/openEHR_logo_RGB.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_bmm_persistence_p_bmm_model_and_syntax" class="sect0">BMM Persistence (P_BMM) Model and Syntax</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="https://www.openehr.org/programs/specification" target="_blank" rel="noopener">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: LANG latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: STABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: reflection, meta-model, UML</p></td>
</tr>
</tbody>
</table>
<div class="imageblock text-center">
<div class="content">
<object type="image/svg+xml" data="openehr_block_diagram.svg" width="60%"><span class="alt">openEHR components</span></object>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2016 - 2020 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="https://www.openehr.org" target="_blank" rel="noopener">The openEHR Foundation</a> is an independent, non-profit foundation, facilitating the sharing of health records by consumers and clinicians via open specifications, clinical models and open platform implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.openehr.org/components/LANG/open_issues" target="_blank" rel="noopener">Problem Reports</a><br>
 Web: <a href="https://specifications.openehr.org" target="_blank" rel="noopener">specifications.openEHR.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>LANG Release 1.0.0</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>2.3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECLANG-2" target="_blank" rel="noopener">SPECLANG-2</a>. Add Basic Meta-Model (BMM) spec to BASE component.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">openEHR SEC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>04 Sep 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add <code>P_BMM_INDEXED_CONTAINER_TYPE</code>, <code>P_BMM_INDEXED_CONTAINER_PROPERTY</code> to support indexed containers like <code>Hash&lt;K, V&gt;</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04 Sep 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add value-set constraint.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26 Mar 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separate from main BMM specification;<br>
 Support generic types as class ancestors;<br>
 add new type <code>P_BMM_BASE_TYPE</code> as parent of <code>P_BMM_SIMPLE_TYPE</code>, <code>P_BMM_GENERIC_TYPE</code> and <code>P_BMM_OPEN_TYPE</code>;<br>
 Remove archetype-related schema meta-data.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27 Apr 2018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Improve and update introductory text in the Overview section.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E Sundvall,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03 Nov 2017</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rename <code>P_BMM_SIMPLE_TYPE_OPEN</code> to <code>P_BMM_OPEN_TYPE</code>;<br>
 Rename <code>P_BMM_GENERIC_PARAMETER.<em>create_bmm_generic_parameter_definition</em></code> to <code><em>create_bmm_generic_parameter</em></code>;<br>
 Remove inheritance from <code>P_BMM_PACKAGE_CONTAINER</code> to <code>P_BMM_MODEL_ELEMENT</code>;<br>
 Make <code>P_BMM_MODEL_ELEMENT</code> abstract;<br>
 Correct <code>P_BMM_ENUMERATION.<em>items_names</em></code> cardinality to multiple;<br>
 Constrain <code>P_BMM_GENERIC_PARAMETER.<em>name</em></code> to one character and upper case.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C Nanjo,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02 Mar 2017</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove class <code>P_BMM_CLASSIFIER</code>.<br>
 Add missed inheritance from <code>P_BMM_PROPERTY</code> to <code>P_BMM_MODEL_ELEMENT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jun 2016</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add missing inheritance from <code>P_BMM_SCHEMA</code> to <code>BMM_SCHEMA_CORE</code>.<br>
 Correct naming of <code><em>bmm_xxx_definition</em></code>, <code><em>create_bmm_xxx_definition</em></code> in <code>P_BMM_XXX</code> classes to <code><em>bmm_xxx</em></code>, <code><em>create_bmm_xxx</em></code> etc.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Apr 2016</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial writing based on ADL Workbench implementation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08 Feb 2016</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_primary_author">Primary Author</h3>
<div class="ulist">
<ul>
<li>
<p>Thomas Beale, Ars Semantica; openEHR Foundation Management Board.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors">Contributors</h3>
<div class="paragraph">
<p>This specification has benefited from formal and informal input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following people for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Patrick Langford, NeuronSong LLC, Utah, USA</p>
</li>
<li>
<p>Claude Nanjo MA African Studies., M Public Health, Cognitive Medical Systems Inc., California, USA</p>
</li>
<li>
<p>Erik Sundvall PhD, Linkoping University, Sweden</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks">Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a registered trademark of the openEHR Foundation</p>
</li>
<li>
<p>'OMG' and 'UML' are registered trademarks of the Object Management Group</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document describes a persistence model for the Basic Meta-Model (BMM) known as <code>P_BMM</code>, that may be used as a basis for serialisation of BMM models. It may be considered as an approximate replacement for the UML XMI for data-only models. It is human-readable and writable, and supports generic types (open and closed), container types, and multiple inheritance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.2. Status</h3>
<div class="paragraph">
<p>This specification is in the STABLE state. The development version of this document can be found at <a href="https://specifications.openehr.org/releases/LANG/latest/bmm_persistence.html" target="_blank" rel="noopener">https://specifications.openehr.org/releases/LANG/latest/bmm_persistence.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.3. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="http://lists.openehr.org/mailman/listinfo/openehr-technical_lists.openehr.org" target="_blank" rel="noopener">technical mailing list</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.openehr.org/components/LANG/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.openehr.org/components/LANG/history" target="_blank" rel="noopener">LANG component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.4. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an openEHR specification is determined by a formal test of that artifact against the relevant <a href="https://specifications.openehr.org/releases/ITS/latest/index" target="_blank" rel="noopener">openEHR Implementation Technology Specification(s) (ITSs)</a>, such as an IDL interface or an XML-schema. Since ITSs are formal derivations from underlying models, ITS conformance indicates model conformance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tooling"><a class="anchor" href="#_tooling"></a>1.5. Tooling</h3>
<div class="paragraph">
<p>The <a href="https://www.openehr.org/downloads/ADLworkbench" target="_blank" rel="noopener">openEHR ADL Workbench (AWB)</a> fully implements this specification, and provide a convenient way of illustrating BMM semantics. The screenshots used in this specification are all from the ADL Workbench. The tool is written in the Eiffel language, and is available as <a href="https://github.com/openEHR/adl-tools" target="_blank" rel="noopener">open source on Github</a>. The BMM libraries can be found in the <a href="https://github.com/wolandscat/EOMF/tree/master/library/bmm" target="_blank" rel="noopener">EOMF Github repository</a>.</p>
</div>
<div class="paragraph">
<p>A modelling tool known as Archie implements BMM in Java, and <a href="https://github.com/openEHR/archie" target="_blank" rel="noopener">can be found in the openEHR Github area</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_conceptual_approach"><a class="anchor" href="#_conceptual_approach"></a>2.1. Conceptual Approach</h3>
<div class="paragraph">
<p>This specification defines a model that may be used as the basis for a serial format for the Basic Meta-Model (BMM). The formalism described here is an adaptation of pure object serialisation approaches used in mainstream programming languages. Instead of directly materialising a BMM instance graph from serial form, the initial materialised form is a graph of <code>P_BMM_XXX</code> classes, with a subsequent in-memory model-to-model transform step required to produce a materialised BMM model.</p>
</div>
<div class="paragraph">
<p>The <code>P_BMM_*</code> classes perform two functions. Firstly, they are a modified and simplified version of the <code>BMM_*</code> classes that enable for example symbolic referencing via class names, syntactical type names to be used etc, rather than the full explosion of fine-grained objects that would result from a direct serialisation of <code>BMM_*</code> classes. This enables an object model represented internally (to a tool, say) in <code>BMM</code> form, converted to <code>P_BMM</code> form, and then serialised to a <code>.bmm</code> file, to be easily readable and editable by human users.</p>
</div>
<div class="paragraph">
<p>The second is that <code>.bmm</code> files function as schemas that support schema inclusion and therefore re-use, in a similar manner to the XML schema languages. Thus, a single logical BMM model can be expressed as a <em>number</em> of <code>.bmm</code> schema files which are actually <code>P_BMM_*</code> object serialisations of parts of the BMM model. A schema reading component has to resolve the schema inclusions and ultimately <code>BMM_*</code> object instantiations to obtain the in-memory form of the model.</p>
</div>
<div class="paragraph">
<p>We thus talk of the <code>P_BMM_*</code> classes as a 'model of a BMM <em>schema</em>' and the <code>BMM_*</code> classes as a 'model of a BMM <em>model</em>', where the latter is understood as the fully computable in-memory object structure with all name references resolved to object references.</p>
</div>
<div class="paragraph">
<p>The <code>P_BMM</code> format is not the only serial format possible for BMM, and alternatives, e.g. a more syntactic style reminiscent of OMG IDL, are possible.</p>
</div>
<div class="paragraph">
<p>The normal use of P_BMM schemas is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create one or more <code>.bmm</code> schema files, using the <code>P_BMM_</code> form of the model. This is easy to understand by using the <a href="../../example/example.bmm" target="_blank" rel="noopener">example schema</a> and/or copying other examples;</p>
</li>
<li>
<p>locate these files in a suitable place for use with a tool such as the <a href="https://www.openehr.org/downloads/ADLworkbench" target="_blank" rel="noopener">openEHR ADL Workbench</a> and <a href="http://linkehr.com" target="_blank" rel="noopener">LinkEHR</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_concrete_format"><a class="anchor" href="#_concrete_format"></a>2.2. Concrete Format</h3>
<div class="paragraph">
<p>BMM models are normally expressed as schema text files that support inclusion and re-use. The default file format has historically been <a href="https://specifications.openehr.org/releases/LANG/latest/odin.html" target="_blank" rel="noopener">openEHR ODIN syntax</a>, and BMM tools to date support this format. However any common format that can express typed object models may be used, including JSON (with type markers), YAML, and XML. The examples shown in this specification are primarily in ODIN, but a tool implementing BMM may choose to serialise in and out of another preferred format.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_persistence_package"><a class="anchor" href="#_persistence_package"></a>3. Persistence Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>3.1. Overview</h3>
<div class="paragraph">
<p>The <code>p_nmm.persistence</code> package, shown below, defines a simplified form of the main BMM model suitable for persisting and human authoring. The <a href="https://specifications.openehr.org/releases/ITS/latest">openEHR BMM schemas</a> are authored in the <code>P_BMM</code> form of the BMM, using the <a href="https://specifications.openehr.org/releases/LANG/latest/odin.html">openEHR ODIN syntax</a>.</p>
</div>
<div id="p_bmm_persistence_package" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/LANG-p_bmm.persistence.svg" alt="LANG p bmm.persistence">
</div>
<div class="title">Figure 1. <code>base.p_bmm.persistence</code> Package</div>
</div>
<div class="paragraph">
<p>The general approach taken in this model is that attributes named <code><em>bmm_xxx</em></code> and of type <code>BMM_XXX</code> are derived from the persisted attributes of the <code>P_BMM_XXX</code> classes of this model. In other words, they are in-memory only references to reconstructed instances of <code>BMM_XXX</code> types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_definitions"><a class="anchor" href="#_class_definitions"></a>3.2. Class Definitions</h3>
<div class="sect3">
<h4 id="_p_bmm_model_element_class"><a class="anchor" href="#_p_bmm_model_element_class"></a>3.2.1. P_BMM_MODEL_ELEMENT Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>P_BMM_MODEL_ELEMENT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_MODEL_ELEMENT</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>documentation</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional documentation of this element.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_package_container_class"><a class="anchor" href="#_p_bmm_package_container_class"></a>3.2.2. P_BMM_PACKAGE_CONTAINER Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_PACKAGE_CONTAINER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persisted form of a model component that contains packages.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>packages</strong>: <code>Hash&lt;String, P_BMM_PACKAGE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Package structure as a hierarchy of packages each potentially containing names of classes in that package in the original model.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_schema_class"><a class="anchor" href="#_p_bmm_schema_class"></a>3.2.3. P_BMM_SCHEMA Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_SCHEMA</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persisted form of <code>BMM_SCHEMA</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_PACKAGE_CONTAINER</code>, <code>BMM_SCHEMA</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>primitive_types</strong>: <code>List&lt;P_BMM_CLASS&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Primitive type definitions. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>class_definitions</strong>: <code>List&lt;P_BMM_CLASS&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class definitions. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>includes</strong>: <code>Hash&lt;String,BMM_INCLUDE_SPEC&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Inclusion list, in the form of a hash of individual include specifications, each of which at least specifies the id of another schema, and may specify a namespace via which types from the included schemas are known in this schema.
Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>validate_created</strong><br>
<strong><em>Pre_state</em></strong>: <code>state = State_created</code><br>
<strong><em>Post_state</em></strong>: <code>passed implies state = State_validated_created</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Implementation of <code><em>validate_created()</em></code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>load_finalise</strong><br>
<strong><em>Pre_state</em></strong>: <code>state = State_validated_created</code><br>
<strong><em>Post_state</em></strong>: <code>state = State_includes_processed or state = State_includes_pending</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Implementation of <code><em>load_finalise()</em></code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>merge</strong> (<br>
other: <code>P_BMM_SCHEMA[1]</code><br>
)<br>
<strong><em>Pre_state</em></strong>: <code>state = State_includes_pending</code><br>
<strong><em>Pre_other_valid</em></strong>: <code>includes_to_process.has (included_schema.schema_id)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Implementation of <code><em>merge()</em></code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>validate</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Implementation of <code><em>validate()</em></code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(effected)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>create_bmm_model</strong><br>
<strong><em>Pre_state</em></strong>: <code>state = P_BMM_PACKAGE_STATE.State_includes_processed</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Implementation of <code><em>create_bmm_model()</em></code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>canonical_packages</strong> (): <code>P_BMM_PACKAGE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Package structure in which all top-level qualified package names like <code>xx.yy.zz</code> have been expanded out to a hierarchy of <code>BMM_PACKAGE</code> objects.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_package_class"><a class="anchor" href="#_p_bmm_package_class"></a>3.2.4. P_BMM_PACKAGE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_PACKAGE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persisted form of a package as a tree structure whose nodes can contain more packages and/or classes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_PACKAGE_CONTAINER</code>, <code>P_BMM_MODEL_ELEMENT</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the package from schema; this name may be qualified if it is a top-level package within the schema, or unqualified. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>classes</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of classes in this package. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_package_definition</strong>: <code>BMM_PACKAGE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_PACKAGE</code> created by <code><em>create_bmm_package_definition</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>merge</strong> (<br>
other: <code>P_BMM_PACKAGE[1]</code><br>
)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Merge packages and classes from other (from an included <code>P_BMM_SCHEMA</code>) into this package.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>create_bmm_package_definition</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generate a <code>BMM_PACKAGE_DEFINITION</code> object and write it to <code><em>bmm_package_definition</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_type_class"><a class="anchor" href="#_p_bmm_type_class"></a>3.2.5. P_BMM_TYPE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>P_BMM_TYPE (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_TYPE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_type</strong>: <code>BMM_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Result of <code><em>create_bmm_type()</em></code> call.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(abstract)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>create_bmm_type</strong> (<br>
a_schema: <code>BMM_MODEL[1]</code>,<br>
a_class_def: <code>BMM_CLASS[1]</code><br>
)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Create appropriate <code>BMM_XXX</code> object; effected in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(abstract)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>as_type_string</strong> (): <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Formal name of the type for display.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_class_class"><a class="anchor" href="#_p_bmm_class_class"></a>3.2.6. P_BMM_CLASS Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_CLASS</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Definition of persistent form of <code>BMM_CLASS</code> for serialisation to ODIN, JSON, XML etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_MODEL_ELEMENT</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the class. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ancestors</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of immediate inheritance parents. If there are generic ancestors, use <code><em>ancestor_defs</em></code> instead. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>properties</strong>: <code>Hash&lt;String,P_BMM_PROPERTY&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of attributes defined in this class. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_abstract</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this is an abstract type. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_override</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this class definition overrides one found in an included schema.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>generic_parameter_defs</strong>: <code>Hash&lt;String,P_BMM_GENERIC_PARAMETER&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of generic parameter definitions. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>source_schema_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference to original source schema defining this class. Set during <code>BMM_SCHEMA</code> materialise. Useful for GUI tools to enable user to edit the schema file containing a given class (i.e. taking into account that a class may be in any of the schemas in a schema inclusion hierarchy).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_class</strong>: <code>BMM_CLASS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_CLASS</code> object built by <code><em>create_bmm_class_definition</em></code> and <code><em>populate_bmm_class_definition</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uid</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Unique id generated for later comparison during merging, in order to detect if two classes are the same. Assigned in post-load processing.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ancestor_defs</strong>: <code>List&lt;P_BMM_GENERIC_TYPE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of structured inheritance ancestors, used only in the case of generic inheritance. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_generic</strong> (): <code>Boolean</code><br>
<strong><em>Post</em></strong>: <code>Result := generic_parameter_defs /= Void</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this class is a generic class.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>create_bmm_class</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Create <code><em>bmm_class_definition</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>populate_bmm_class</strong> (<br>
a_bmm_schema: <code>BMM_MODEL[1]</code><br>
)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Add remaining model elements from Current to <code><em>bmm_class_definition</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_generic_parameter_class"><a class="anchor" href="#_p_bmm_generic_parameter_class"></a>3.2.7. P_BMM_GENERIC_PARAMETER Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_GENERIC_PARAMETER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_GENERIC_PARAMETER</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_MODEL_ELEMENT</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the parameter, e.g. 'T' etc. Persisted attribute. Name is limited to 1 character, upper case.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>conforms_to_type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional conformance constraint - the name of a type to which a concrete substitution of this generic parameter must conform. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_generic_parameter</strong>: <code>BMM_PARAMETER_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_GENERIC_PARAMETER</code> created by <code><em>create_bmm_generic_parameter</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>create_bmm_generic_parameter</strong> (<br>
a_bmm_schema: <code>BMM_MODEL[1]</code><br>
)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Create <code><em>bmm_generic_parameter</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><strong><em>Inv_generic_name</em></strong>: <code>name.count = 1 and name.is_upper</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_property_class"><a class="anchor" href="#_p_bmm_property_class"></a>3.2.8. P_BMM_PROPERTY Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>P_BMM_PROPERTY (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_PROPERTY</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_MODEL_ELEMENT</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of this property within its class. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_mandatory</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this property is mandatory in its class. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_computed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this property is computed rather than stored in objects of this class. Persisted Attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_im_infrastructure</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this property is info model 'infrastructure' rather than 'data'. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_im_runtime</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this property is info model 'runtime' settable property. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_def</strong>: <code>P_BMM_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of this property, if not a simple String type reference. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_property</strong>: <code>BMM_PROPERTY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>BMM_PROPERTY created by create_bmm_property_definition.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>create_bmm_property</strong> (<br>
a_bmm_schema: <code>BMM_MODEL[1]</code>,<br>
a_class_def: <code>BMM_CLASS[1]</code><br>
)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Create <code><em>bmm_property_definition</em></code> from <code>P_BMM_XX</code> parts.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_base_type_class"><a class="anchor" href="#_p_bmm_base_type_class"></a>3.2.9. P_BMM_BASE_TYPE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>P_BMM_BASE_TYPE (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_PROPER_TYPE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_TYPE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_constraint</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_simple_type_class"><a class="anchor" href="#_p_bmm_simple_type_class"></a>3.2.10. P_BMM_SIMPLE_TYPE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_SIMPLE_TYPE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_SIMPLE_TYPE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_BASE_TYPE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of type - must be a simple class name.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_type</strong>: <code>BMM_SIMPLE_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Result of <code><em>create_bmm_type()</em></code> call.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_open_type_class"><a class="anchor" href="#_p_bmm_open_type_class"></a>3.2.11. P_BMM_OPEN_TYPE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_OPEN_TYPE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_PARAMETER_TYPE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_BASE_TYPE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Simple type parameter as a single letter like 'T', 'G' etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_type</strong>:</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Result of <code><em>create_bmm_type()</em></code> call.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_generic_type_class"><a class="anchor" href="#_p_bmm_generic_type_class"></a>3.2.12. P_BMM_GENERIC_TYPE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_GENERIC_TYPE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_GENERIC_TYPE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_BASE_TYPE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>root_type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Root type of this generic type, e.g. <code>Interval</code> in <code>Interval&lt;Integer&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>generic_parameter_defs</strong>: <code>List&lt;P_BMM_TYPE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generic parameters of the root_type in this type specifier if non-simple types. The order must match the order of the owning class&#8217;s formal generic parameter declarations. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>generic_parameters</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generic parameters of the <code><em>root_type</em></code> in this type specifier, if simple types. The order must match the order of the owning class&#8217;s formal generic parameter declarations. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_type</strong>: <code>BMM_GENERIC_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Result of <code><em>create_bmm_type()</em></code> call.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>generic_parameter_refs</strong> (): <code>List&lt;P_BMM_TYPE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generic parameters of the root_type in this type specifier. The order must match the order of the owning class&#8217;s formal generic parameter declarations</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_container_type_class"><a class="anchor" href="#_p_bmm_container_type_class"></a>3.2.13. P_BMM_CONTAINER_TYPE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_CONTAINER_TYPE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_CONTAINER_TYPE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_TYPE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>container_type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The type of the container. This converts to the <code><em>root_type</em></code> in <code>BMM_GENERIC_TYPE</code>. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_def</strong>: <code>P_BMM_BASE_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of <code><em>type</em></code>, if not a simple String type reference. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The target type; this converts to the first parameter in <code><em>generic_parameters</em></code> in <code>BMM_GENERIC_TYPE</code>. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_type</strong>: <code>BMM_CONTAINER_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Result of <code><em>create_bmm_type()</em></code> call.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_ref</strong> (): <code>P_BMM_BASE_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The target type; this converts to the first parameter in <code><em>generic_parameters</em></code> in <code>BMM_GENERIC_TYPE</code>. Persisted attribute.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_indexed_container_type_class"><a class="anchor" href="#_p_bmm_indexed_container_type_class"></a>3.2.14. P_BMM_INDEXED_CONTAINER_TYPE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_INDEXED_CONTAINER_TYPE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_CONTAINER_TYPE</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>index_type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_type</strong>: <code>BMM_INDEXED_CONTAINER_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Result of <code><em>create_bmm_type()</em></code> call.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_single_property_class"><a class="anchor" href="#_p_bmm_single_property_class"></a>3.2.15. P_BMM_SINGLE_PROPERTY Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_SINGLE_PROPERTY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_SINGLE_PROPERTY</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_PROPERTY</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the type is a simple type, then this attribute will hold the type name. If the type is a container or generic, then type_ref will hold the type definition. The resulting type is generated in type_def.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_ref</strong>: <code>P_BMM_SIMPLE_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of this property computed from <code><em>type</em></code> for later use in <code><em>bmm_property</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_property</strong>: <code>BMM_UNITARY_PROPERTY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_PROPERTY</code> created by <code><em>create_bmm_property_definition</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_def</strong> (): <code>P_BMM_SIMPLE_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generate <code><em>type_ref</em></code> from <code><em>type</em></code> and save.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_single_property_open_class"><a class="anchor" href="#_p_bmm_single_property_open_class"></a>3.2.16. P_BMM_SINGLE_PROPERTY_OPEN Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_SINGLE_PROPERTY_OPEN</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of a <code>BMM_SINGLE_PROPERTY_OPEN</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_PROPERTY</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_ref</strong>: <code>P_BMM_OPEN_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of this property computed from <code><em>type</em></code> for later use in <code><em>bmm_property</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of this property, if a simple String type reference. Really we should use <code><em>type_def</em></code> to be regular in the schema, but that makes the schema more wordy and less clear. So we use this persisted String value, and compute the <code><em>type_def</em></code> on the fly. Persisted attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_property</strong>: <code>BMM_UNITARY_PROPERTY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_PROPERTY</code> created by <code><em>create_bmm_property_definition</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_def</strong> (): <code>P_BMM_OPEN_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generate <code><em>type_ref</em></code> from <code><em>type</em></code> and save.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_generic_property_class"><a class="anchor" href="#_p_bmm_generic_property_class"></a>3.2.17. P_BMM_GENERIC_PROPERTY Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_GENERIC_PROPERTY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_GENERIC_PROPERTY</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_PROPERTY</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_def</strong>: <code>P_BMM_GENERIC_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of this property, if not a simple String type reference. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_property</strong>: <code>BMM_UNITARY_PROPERTY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_PROPERTY</code> created by <code><em>create_bmm_property_definition</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_container_property_class"><a class="anchor" href="#_p_bmm_container_property_class"></a>3.2.18. P_BMM_CONTAINER_PROPERTY Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_CONTAINER_PROPERTY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_CONTAINER_PROPERTY</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_PROPERTY</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cardinality</strong>: <code>Interval&lt;Integer&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cardinality of this property in its class. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_def</strong>: <code>P_BMM_CONTAINER_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of this property, if not a simple String type reference. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_property</strong>: <code>BMM_CONTAINER_PROPERTY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_PROPERTY</code> created by <code><em>create_bmm_property</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">(redefined)</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>create_bmm_property</strong> (<br>
a_bmm_schema: <code>BMM_MODEL[1]</code>,<br>
a_class_def: <code>BMM_CLASS[1]</code><br>
)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Create <code><em>bmm_property_definition</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_indexed_container_property_class"><a class="anchor" href="#_p_bmm_indexed_container_property_class"></a>3.2.19. P_BMM_INDEXED_CONTAINER_PROPERTY Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_INDEXED_CONTAINER_PROPERTY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_CONTAINER_PROPERTY</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type_def</strong>: <code>P_BMM_INDEXED_CONTAINER_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type definition of this property, if not a simple String type reference. Persistent attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_property</strong>: <code>BMM_INDEXED_CONTAINER_PROPERTY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_PROPERTY</code> created by <code><em>create_bmm_property</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_enumeration_class"><a class="anchor" href="#_p_bmm_enumeration_class"></a>3.2.20. P_BMM_ENUMERATION Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_ENUMERATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_ENUMERATION</code> attributes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_CLASS</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item_names</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item_values</strong>: <code>List&lt;Any&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_class</strong>: <code>BMM_ENUMERATION</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_CLASS</code> object build by <code><em>create_bmm_class_definition</em></code> and <code><em>populate_bmm_class_definition</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_enumeration_string_class"><a class="anchor" href="#_p_bmm_enumeration_string_class"></a>3.2.21. P_BMM_ENUMERATION_STRING Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_ENUMERATION_STRING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of <code>BMM_ENUMERATION_STRING</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_ENUMERATION</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_class</strong>: <code>BMM_ENUMERATION_STRING</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_CLASS</code> object build by <code><em>create_bmm_class_definition</em></code> and <code><em>populate_bmm_class_definition</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_bmm_enumeration_integer_class"><a class="anchor" href="#_p_bmm_enumeration_integer_class"></a>3.2.22. P_BMM_ENUMERATION_INTEGER Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>P_BMM_ENUMERATION_INTEGER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Persistent form of an instance of <code>BMM_ENUMERATION_INTEGER</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>P_BMM_ENUMERATION</code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bmm_class</strong>: <code>BMM_ENUMERATION_INTEGER</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BMM_CLASS</code> object build by <code><em>create_bmm_class_definition</em></code> and <code><em>populate_bmm_class_definition</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bmm_persistence_syntax"><a class="anchor" href="#_bmm_persistence_syntax"></a>4. BMM Persistence Syntax</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>4.1. Overview</h3>
<div class="paragraph">
<p>A BMM schema is normally written in the <a href="https://specifications.openehr.org/releases/LANG/latest/odin.html">ODIN syntax</a>, although any other serialisation supporting typed object models may be used, including JSON (with type markers), YAML, XML etc. The ODIN form is described here. The structures are direct ODIN serialisations of the <code>P_BMM_XXX</code> classes in the <code>persistence</code> package.</p>
</div>
</div>
<div class="sect2">
<h3 id="_header_items"><a class="anchor" href="#_header_items"></a>4.2. Header Items</h3>
<div class="paragraph">
<p>The following shows the header items of a BMM schema, which correspond to the 'persistent' attributes of the class <code>P_BMM_SCHEMA</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">------------------------------------------------------
-- P_BMM version on which these schemas are based.
------------------------------------------------------
bmm_version = &lt;"2.3"&gt;

------------------------------------------------------
-- schema identification
-- (schema_id computed as &lt;rm_publisher&gt;_&lt;schema_name&gt;_&lt;rm_release&gt;)
------------------------------------------------------
rm_publisher = &lt;"openehr"&gt;
schema_name = &lt;"adltest"&gt;
rm_release = &lt;"1.0.2"&gt;
model_name = &lt;"TEST_PKG"&gt;

------------------------------------------------------
-- schema documentation
------------------------------------------------------
schema_revision = &lt;"1.0.36"&gt;
schema_lifecycle_state = &lt;"stable"&gt;
schema_description = &lt;"openEHR schema to support test archetypes"&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inclusions"><a class="anchor" href="#_inclusions"></a>4.3. Inclusions</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">includes = &lt;
    ["1"] = &lt;
        id = &lt;"openehr_basic_types_1.0.2"&gt;
    &gt;
&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_package_definition"><a class="anchor" href="#_package_definition"></a>4.4. Package Definition</h3>
<div class="paragraph">
<p>The packages definition should be self-explanatory: just name the classes and packages in a recursive fashion.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
only top-level package ids can be paths (i.e. contain the '.' character)
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
only classes defined in the same schema can be referenced in the package section in that schema.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
make sure that the ODIN 'keys' are the same as the 'name' attributes in each block.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">packages = &lt;
    ["org.openehr.test_pkg"] = &lt;
        name = &lt;"org.openehr.test_pkg"&gt;
        classes = &lt;"WHOLE", "SOME_TYPE", "BOOK", "CHAPTER", "ENTRY", "CAR", "CAR_BODY"&gt;
    &gt;
&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_definitions_2"><a class="anchor" href="#_class_definitions_2"></a>4.5. Class Definitions</h3>
<div class="sect3">
<h4 id="_classes_for_primitive_types"><a class="anchor" href="#_classes_for_primitive_types"></a>4.5.1. Classes for Primitive Types</h4>
<div class="paragraph">
<p>Definitions for primitive types in a BMM schema are just normal class definitions within a <code>primitive_types</code> block. Types that are included here are usually types corresonding to primitives in target programming languages, XML schema or other downstream technologies. These types can be be detected as primitive types by tools, but otherwise are processed in the same way as types defined in the main <code>class_definitions</code> group.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
unlike UML, all container types such as <code>List&lt;T&gt;</code>, <code>Hash&lt;V,K&gt;</code> etc are exlicit in a BMM schema, and consequently, such types are normally defined (including with generic parameters) in a BMM schema.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">primitive_types = &lt;
    ["Any"] = &lt;
        name = &lt;"Any"&gt;
        is_abstract = &lt;True&gt;
    &gt;
    ["Ordered"] = &lt;
        name = &lt;"Ordered"&gt;
        is_abstract = &lt;True&gt;
        ancestors = &lt;"Any"&gt;
    &gt;
&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_non_primitive_classes"><a class="anchor" href="#_non_primitive_classes"></a>4.5.2. Non-primitive Classes</h4>
<div class="paragraph">
<p>The main group of class definitions in a schema occurs within the <code><em>class_definitions</em></code> block. Each definition is a keyed ODIN object block correspnding to a serialised <code>P_BMM_CLASS</code> object, where the key is the class name. Since <code>name</code> is a BMM meta-model attribute, the class definition always contains its ODIN key.</p>
</div>
<div class="paragraph">
<p>The possible class-level meta-properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>name</em></code> - class name - any capitalisation can be used, usually one of CamelCase or so-called UPPER_SNAKE_CASE;</p>
</li>
<li>
<p><code><em>ancestors</em></code> - states classes from which this class inherits, as an ODIN String list;</p>
</li>
<li>
<p><code><em>is_abstract</em></code> - indicates that the class cannot be instantiated directly;</p>
</li>
<li>
<p><code><em>properties</em></code> - ODIN block containing definitions consisting of <code>P_BMM_PROPERTY</code> descendants, keyed by property name.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simple_classes"><a class="anchor" href="#_simple_classes"></a>4.5.3. Simple Classes</h4>
<div class="paragraph">
<p>Simple classes are those whose type is the same as the class, as opposed to generic classes and enumerated types (see below).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">class_definitions = &lt;
    ["ITEM"] = &lt;
        name = &lt;"ITEM"&gt;
        ancestors = &lt;"Any"&gt;
        is_abstract = &lt;True&gt;
        properties = &lt;
            -- properties here
        &gt;
    &gt;
    -- more classes here
&gt;</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_class_properties"><a class="anchor" href="#_class_properties"></a>4.5.3.1. Class properties</h5>
<div class="paragraph">
<p>Class properties from the original model are expressed using ODIN object blocks keyed by property name. Since there are multiple possible descendants of <code>P_BMM_PROPERTY</code>, ODIN type markers must be used to indicate which subtypes is used in each case.</p>
</div>
<div class="paragraph">
<p>The possible BMM meta-properties of all property types are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>name</em></code> - <code>String</code> name of the property in its owning class in the model - use camelCase or snake_case as appropriate;</p>
</li>
<li>
<p><code><em>is_mandatory</em></code> - <code>Boolean</code> flag indicating whether the property is mandatory within its class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following shows the class <code>ELEMENT</code> with two properties <code><em>null_flavour</em></code> and <code><em>value</em></code> of BMM meta-type <code>P_BMM_SINGLE_PROPERTY</code>, i.e. corresponding to a single-valued attribute from the original model.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["ELEMENT"] = &lt;
        name = &lt;"ELEMENT"&gt;
        ancestors = &lt;"ITEM"&gt;
        properties = &lt;
            ["null_flavour"] = (P_BMM_SINGLE_PROPERTY) &lt;
                name = &lt;"null_flavour"&gt;
                type = &lt;"DV_CODED_TEXT"&gt;
                is_mandatory = &lt;True&gt;
            &gt;
            ["value"] = (P_BMM_SINGLE_PROPERTY) &lt;
                name = &lt;"value"&gt;
                type = &lt;"DATA_VALUE"&gt;
            &gt;
        &gt;
    &gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_container_properties"><a class="anchor" href="#_container_properties"></a>4.5.3.2. Container Properties</h5>
<div class="paragraph">
<p>The following is a <code>P_BMM_CONTAINER_PROPERTY</code> definition for the model property <code>items: List&lt;ITEM&gt;</code> in the <code>ELEMENT</code> class. The type is expressed in the <code><em>type_def</em></code> part which indicates the type of the container, which must be defined elsewhere in the schema, typically in the primitive types. The optional <code><em>cardinality</em></code> meta-property indicates cardinality of the container, and is expressed as a ODIN range. The default is <code>|0..*|</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["ELEMENT"] = &lt;
        name = &lt;"ELEMENT"&gt;
        ancestors = &lt;"ITEM"&gt;
        properties = &lt;
            ["items"] = (P_BMM_CONTAINER_PROPERTY) &lt;
                name = &lt;"items"&gt;
                type_def = &lt;
                    container_type = &lt;"List"&gt;
                    type = &lt;"ITEM"&gt;
                &gt;
                cardinality = &lt;|&gt;=1|&gt;
                is_mandatory = &lt;True&gt;
            &gt;
        &gt;
    &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Indexed containers such as <code>Hash&lt;K,V&gt;</code>, <code>Dictionary&lt;K,V&gt;</code> etc are also suuported via the <code>P_BMM_INDEXED_CONTAINER_PROPERTY</code>, the use of which is shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">	["CALLBACK_WAIT"] = &lt;
		name = &lt;"CALLBACK_WAIT"&gt;
		ancestors = &lt;"..."&gt;
        properties = &lt;
			["custom_actions"] = (P_BMM_INDEXED_CONTAINER_PROPERTY) &lt;
				name = &lt;"custom_actions"&gt;
				type_def = &lt;
					container_type = &lt;"Hash"&gt;
					index_type = &lt;"String"&gt;
					type = &lt;"EVENT_ACTION"&gt;
				&gt;
				cardinality = &lt;|&gt;=0|&gt;
			&gt;
		&gt;
	&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above represents a property <code>custom_actions: Hash &lt;String, EVENT_ACTION&gt;</code> in the class <code>CALLBACK_WAIT</code>. The meta-element <code>index_type</code> is used to state the key type.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generic_classes"><a class="anchor" href="#_generic_classes"></a>4.5.4. Generic Classes</h4>
<div class="paragraph">
<p>Generic classes are those that have one or more substitutable generic type parameters. Such classes are therefore <em>type generators</em>, since actual types are formed by substitution of concrete types (typically simple classes) for the formal type parameters. The following example shows a generic class <code>Interval</code> with <code>generic_parameter_defs</code> of <code>T</code> which is constrained to conform to the type <code>Ordered</code>. This structure defineds the type <code>Interval&lt;T&#8594;Ordered&gt;</code>, with the same meaning as UML and programming languages supporting generic (templated) types.</p>
</div>
<div class="paragraph">
<p>Generic classes will normally contain one or more properties whose formal type is the generic type parameter, i.e. the <code>T</code> in this example, as is the case below where the model properties <code><em>lower</em></code> and <code><em>upper</em></code> are both declared to be of type <code>T</code>. This declaration necessitates the use of the BMM meta-type <code>P_BMM_SINGLE_PROPERTY_OPEN</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["Interval"] = &lt;
        name = &lt;"Interval"&gt;
        ancestors = &lt;"Any"&gt;
        generic_parameter_defs = &lt;
            ["T"] = &lt;
                name = &lt;"T"&gt;
                conforms_to_type = &lt;"Ordered"&gt;
            &gt;
        &gt;
        properties = &lt;
            ["lower"] = (P_BMM_SINGLE_PROPERTY_OPEN) &lt;
                name = &lt;"lower"&gt;
                type = &lt;"T"&gt;
            &gt;
            ["upper"] = (P_BMM_SINGLE_PROPERTY_OPEN) &lt;
                name = &lt;"upper"&gt;
                type = &lt;"T"&gt;
            &gt;
        &gt;
    &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Given the presence of generic classes in a BMM schema, derived generic types can be used as the type of properties in other classes, for which the BMM meta-type <code>P_BMM_GENERIC_PROPERTY</code> is used. The folowing example shows first a generic class <code>DV_INTERVAL</code> defined in a similar way to <code>Interval</code> above, and then a class <code>SOME_TYPE</code> containing the property <code><em>qty_interval_attr</em></code> whose model type is <code>DV_INTERVAL&lt;DV_QUANTITY&gt;</code>. In the latter type declaration, the <code>DV_INTERVAL</code> is the <code><em>root_type</em></code> and <code>DV_INTERVAL</code> the <code><em>generic_parameter</em></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["DV_INTERVAL"] = &lt;
        name = &lt;"DV_INTERVAL"&gt;
        ancestors = &lt;"Interval", "DATA_VALUE"&gt;
        generic_parameter_defs = &lt;
            ["T"] = &lt;
                name = &lt;"T"&gt;
                conforms_to_type = &lt;"DV_ORDERED"&gt;
            &gt;
        &gt;
    &gt;

    ["SOME_TYPE"] = &lt;
        name = &lt;"SOME_TYPE"&gt;
        ancestors = &lt;"Any", ...&gt;
        properties = &lt;
            ["qty_interval_attr"] = (P_BMM_GENERIC_PROPERTY) &lt;
                name = &lt;"qty_interval_attr"&gt;
                type_def = &lt;
                    root_type = &lt;"DV_INTERVAL"&gt;
                    generic_parameters = &lt;"DV_QUANTITY"&gt;
                &gt;
            &gt;
        &gt;
    &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Type declarations can also be nested types, for example and container followed by a generic type. In the following the <code><em>careProvider</em></code> attribute is declared to be of model type <code>List&lt;Reference&lt;Party&gt;&gt;</code>. Any level of type nesting is allowed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["Patient"] = &lt;
        name = &lt;"Patient"&gt;
        ancestors = &lt;"Any"&gt;
        properties = &lt;
            ["careProvider"] = (P_BMM_CONTAINER_PROPERTY) &lt;
                name = &lt;"careProvider"&gt;
                type_def = &lt;
                    container_type = &lt;"List"&gt;
                    type_def = (P_BMM_GENERIC_TYPE) &lt;
                        root_type = &lt;"Reference"&gt;
                        generic_parameters = &lt;"Party"&gt;
                    &gt;
                &gt;
                cardinality = &lt;|&gt;=0|&gt;
            &gt;
        &gt;
    &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following property definition is based on the class <code>REFERENCE_RANGE</code>, and in this case, has a generic parameter type that is another generic type: <code>DV_INTERVAL&lt;DV_QUANTITY&gt;</code>. To express this, we use <code>generic_parameter_defs</code> instead of just <code><em>generic_parameters</em></code> to specify a type structure, rather than just a string type name. Note that <code>generic_parameter_defs</code> is a logical list in general, since there can always be more than one generic parameter, i.e. 'T', 'U' etc, even though it is most commonly just one. Accordingly, the usual ODIN keyed hash structure is used with each member being keyed by a generic parameter name, below <code>["T"]</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["REFERENCE_RANGE"] = &lt;
        name = &lt;"REFERENCE_RANGE"&gt;
        ancestors = &lt;"Any"&gt;
        generic_parameter_defs = &lt;
            ["T"] = &lt;
                name = &lt;"T"&gt;
                conforms_to_type = &lt;"DV_ORDERED"&gt;
            &gt;
        &gt;
        properties = &lt;
            ["range"] = (P_BMM_SINGLE_PROPERTY) &lt;
                name = &lt;"range"&gt;
                type = &lt;"DV_INTERVAL"&gt;
                is_mandatory = &lt;True&gt;
            &gt;
        &gt;
    &gt;

    ["RANGE_OF_INTERVAL_OF_QUANTITY"] = &lt;
        name = &lt;"RANGE_OF_INTERVAL_OF_QUANTITY"&gt;
        ancestors = &lt;"Any", ...&gt;
        properties = &lt;
            ["range"] = (P_BMM_GENERIC_PROPERTY) &lt;
                name = &lt;"range"&gt;
                type_def = &lt;
                    root_type = &lt;"REFERENCE_RANGE"&gt;
                    generic_parameter_defs = &lt;
                        ["T"] = (P_BMM_GENERIC_TYPE) &lt;
                            root_type = &lt;"DV_INTERVAL"&gt;
                            generic_parameters = &lt;"DV_QUANTITY"&gt;
                        &gt;
                    &gt;
                &gt;
            &gt;
        &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example just does the same as the one above, but shows an (unrealistic) but legal case of multiple, mixed, nested generic parameters corresponding to the model property definition <code><em>range</em>: REFERENCE_RANGE&lt;DV_INTERVAL&lt;DV_QUANTITY&gt;, Integer, List&lt;DV_QUANTITY&gt;, List&lt;DV_INTERVAL&lt;DV_QUANTITY&gt;&gt;&gt;</code>. The rules for expressing types is clearly illustrated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use 'type' for simple string type refs; use <code><em>type_def</em></code> for structure types;</p>
</li>
<li>
<p>within <code>P_BMM_GENERIC_TYPE</code>, use <code><em>generic_parameters</em></code> for a list of string types;</p>
</li>
<li>
<p>use <code><em>generic_parameter_defs</em></code> for a list of complex type references.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["CRAZY_TYPE"] = &lt;
        name = &lt;"CRAZY_TYPE"&gt;
        ancestors = &lt;"Any"&gt;
        properties = &lt;
            ["range"] = (P_BMM_GENERIC_PROPERTY) &lt;
                name = &lt;"range"&gt;
                type_def = &lt;
                    root_type = &lt;"REFERENCE_RANGE"&gt;
                    generic_parameter_defs = &lt;
                        ["T"] = (P_BMM_GENERIC_TYPE) &lt;
                            root_type = &lt;"DV_INTERVAL"&gt;
                            generic_parameters = &lt;"DV_QUANTITY"&gt;
                        &gt;
                        ["U"] = (P_BMM_SIMPLE_TYPE) &lt;
                            type = &lt;"Integer"&gt;
                        &gt;
                        ["V"] = (P_BMM_CONTAINER_TYPE) &lt;
                            type = &lt;"DV_QUANTITY"&gt;
                            container_type = &lt;"List"&gt;
                        &gt;
                        ["W"] = (P_BMM_CONTAINER_TYPE) &lt;
                            type_def = (P_BMM_GENERIC_TYPE) &lt;
                                root_type = &lt;"DV_INTERVAL"&gt;
                                generic_parameters = &lt;"DV_QUANTITY"&gt;
                            &gt;
                            container_type = &lt;"List"&gt;
                        &gt;
                    &gt;
                &gt;
            &gt;
        &gt;
    &gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_enumerated_types"><a class="anchor" href="#_enumerated_types"></a>4.5.5. Enumerated Types</h4>
<div class="paragraph">
<p>In a BMM schema, enumerated types are treated as constrained forms of standard types with open ranges, currently only <code>Integer</code> and <code>String</code>. They are accordingly represented using class definitions of the meta-types <code>P_BMM_ENUMERATION_INTEGER</code> and <code>P_BMM_ENUMERATION_STRING</code> respectively. In either case, just names (<code><em>items_names</em></code> meta-property) or both names and values (<code><em>item_values</em></code> meta-property) can be specified.</p>
</div>
<div class="paragraph">
<p>The following example shows two variants of am enumerated type based on the <code>Integer</code> primitive type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["PROPORTION_KIND"] = (P_BMM_ENUMERATION_INTEGER) &lt;
        name = &lt;"PROPORTION_KIND"&gt;
        ancestors = &lt;"Integer"&gt;
        item_names = &lt;"pk_ratio", "pk_unitary", "pk_percent", "pk_fraction", "pk_integer_fraction"&gt;
    &gt;

    ["PROPORTION_KIND_2"] = (P_BMM_ENUMERATION_INTEGER) &lt;
        name = &lt;"PROPORTION_KIND_2"&gt;
        ancestors = &lt;"Integer"&gt;
        item_names = &lt;"pk_ratio", "pk_unitary", "pk_percent", "pk_fraction", "pk_integer_fraction"&gt;
        item_values = &lt;0, 1001, 1002, 1003&gt;
    &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows two similar examples based on <code>String</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["MAGNITUDE_STATUS"] = (P_BMM_ENUMERATION_STRING) &lt;
        name = &lt;"MAGNITUDE_STATUS"&gt;
        ancestors = &lt;"String", ...&gt;
        item_names = &lt;"le", "ge", "eq", "approx_eq"&gt;
        item_values = &lt;"&lt;=", "&gt;=", "=", "~"&gt;
    &gt;

    ["NAME_PART"] = (P_BMM_ENUMERATION_STRING) &lt;
        name = &lt;"NAME_PART"&gt;
        ancestors = &lt;"String", ...&gt;
        item_names = &lt;"FIRST", "MIDDLE", "LAST"&gt;
    &gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_value_set_constraints"><a class="anchor" href="#_value_set_constraints"></a>4.5.6. Value-set Constraints</h4>
<div class="paragraph">
<p>Value-sets are related to enumerated types, but rather than specifying the possible instance values for a type in an explicit enumeration type, a standard type can be marked as having values that conform to an external value set, such as a terminology. The following shows an attribute declared to be of a simple type <code>CODE_PHRASE</code> in the normal way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["encoding"] = (P_BMM_SINGLE_PROPERTY) &lt;
        name = &lt;"encoding"&gt;
        type = &lt;"CODE_PHRASE"&gt;
    &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>With a value-set constraint added, it now looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">    ["encoding"] = (P_BMM_SINGLE_PROPERTY) &lt;
        name = &lt;"encoding"&gt;
        type_ref = &lt;
            type = &lt;"CODE_PHRASE"&gt;
            value_constraint = &lt;"openEHR::languages"&gt;
        &gt;
    &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The use of the <code>value_constraint</code> attribute forces the use of the <code>type_ref</code> structural form of the type definition within a <code>P_BMM_SINGLE_PROPERTY</code> instance, rather than the simple <code>String</code> form above.</p>
</div>
<div class="paragraph">
<p>Within a container type, the structure is slightly different, owing to another level of instance nesting. The following exmaple shows a container class declaration in original form and then with a value constraint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">	-- original form
	["language"] = (P_BMM_CONTAINER_PROPERTY) &lt;
		name = &lt;"language"&gt;
		type_def = &lt;
			container_type = &lt;"List"&gt;
			type = &lt;"Coding"&gt;
		&gt;
	&gt;

	-- with value constraint
	["language"] = (P_BMM_CONTAINER_PROPERTY) &lt;
		name = &lt;"language"&gt;
		type_def = &lt;
			container_type = &lt;"List"&gt;
			type_def = (P_BMM_SIMPLE_TYPE) &lt;
				type = &lt;"Coding"&gt;
				value_constraint = &lt;"hl7::Languages"&gt;
			&gt;
		&gt;
	&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inheritance"><a class="anchor" href="#_inheritance"></a>4.6. Inheritance</h3>
<div class="paragraph">
<p>In the case of inheritance from simple classes, the <code>ancestors</code> list of Strings may be used to simply name the types (which are the same as class names), as seen in the above examples. In the case of generic inheritance, the ancestors are generic types, which may be open, partially closed or fully closed. The following example shows a class model containing generic inheritance in UML (using the closest approximation available in UML), followed by the equivalent P_BMM schema. In the latter, a structured <code>ancestor_defs</code> section is used instead of the <code>ancestors</code> String list, in the same way as for the <code>P_BMM_GENERIC_PROPERTY</code> examples above.</p>
</div>
<div id="inheritance_example" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/LANG-bmm-inheritance-example.svg" alt="LANG bmm inheritance example">
</div>
<div class="title">Figure 2. Generic inheritance eaxmple model</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-odin" data-lang="odin">	["GENERIC_PARENT"] = &lt;
		name = &lt;"GENERIC_PARENT"&gt;
		generic_parameter_defs = &lt;
			["T"] = &lt;
				name = &lt;"T"&gt;
				conforms_to_type = &lt;"SUPPLIER"&gt;
			&gt;
			["U"] = &lt;
				name = &lt;"U"&gt;
				conforms_to_type = &lt;"SUPPLIER"&gt;
			&gt;
		&gt;
		properties = &lt;
			["property_a"] = (P_BMM_SINGLE_PROPERTY_OPEN) &lt;
				name = &lt;"property_a"&gt;
				type = &lt;"T"&gt;
			&gt;
			["property_b"] = (P_BMM_SINGLE_PROPERTY_OPEN) &lt;
				name = &lt;"property_b"&gt;
				type = &lt;"U"&gt;
			&gt;
		&gt;
	&gt;

	["SUPPLIER"] = &lt;
		name = &lt;"SUPPLIER"&gt;
		is_abstract = &lt;True&gt;
		properties = &lt;
			["abstract_prop"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"abstract_prop"&gt;
				type = &lt;"String"&gt;
			&gt;
		&gt;
	&gt;

	["SUPPLIER_A"] = &lt;
		name = &lt;"SUPPLIER_A"&gt;
		ancestors = &lt;"SUPPLIER"&gt;
		properties = &lt;
			["magnitude"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"magnitude"&gt;
				type = &lt;"Double"&gt;
				is_mandatory = &lt;True&gt;
			&gt;
			["units"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"units"&gt;
				type = &lt;"String"&gt;
				is_mandatory = &lt;True&gt;
			&gt;
		&gt;
	&gt;

	["SUPPLIER_B"] = &lt;
		name = &lt;"SUPPLIER_B"&gt;
		ancestors = &lt;"SUPPLIER"&gt;
		properties = &lt;
			["property"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"property"&gt;
				type = &lt;"CODE_PHRASE"&gt;
				is_mandatory = &lt;True&gt;
			&gt;
			["precision"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"precision"&gt;
				type = &lt;"Integer"&gt;
			&gt;
		&gt;
	&gt;

	["GENERIC_CHILD_OPEN_T"] = &lt;
		name = &lt;"GENERIC_CHILD_OPEN_T"&gt;
		ancestor_defs = &lt;
			["GENERIC_PARENT&lt;T,SUPPLIER_B&gt;"] = (P_BMM_GENERIC_TYPE) &lt;
				root_type = &lt;"GENERIC_PARENT"&gt;
				generic_parameters = &lt;"T", "SUPPLIER_B"&gt;
			&gt;
		&gt;
		generic_parameter_defs = &lt;
			["T"] = &lt;
				name = &lt;"T"&gt;
				conforms_to_type = &lt;"SUPPLIER"&gt;
			&gt;
		&gt;
		properties = &lt;
			["gen_child_open_t_prop"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"gen_child_open_t_prop"&gt;
				type = &lt;"String"&gt;
			&gt;
		&gt;
	&gt;

	["GENERIC_CHILD_OPEN_U"] = &lt;
		name = &lt;"GENERIC_CHILD_OPEN_U"&gt;
		ancestor_defs = &lt;
			["GENERIC_PARENT&lt;SUPPLIER_A,U&gt;"] = (P_BMM_GENERIC_TYPE) &lt;
				root_type = &lt;"GENERIC_PARENT"&gt;
				generic_parameters = &lt;"SUPPLIER_A", "U"&gt;
			&gt;
		&gt;
		generic_parameter_defs = &lt;
			["U"] = &lt;
				name = &lt;"U"&gt;
				conforms_to_type = &lt;"SUPPLIER"&gt;
			&gt;
		&gt;
		properties = &lt;
			["gen_child_open_u_prop"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"gen_child_open_u_prop"&gt;
				type = &lt;"String"&gt;
			&gt;
		&gt;
	&gt;

	["GENERIC_CHILD_CLOSED"] = &lt;
		name = &lt;"GENERIC_CHILD_CLOSED"&gt;
		ancestor_defs = &lt;
			["GENERIC_PARENT&lt;SUPPLIER_A,SUPPLIER_B&gt;"] = (P_BMM_GENERIC_TYPE) &lt;
				root_type = &lt;"GENERIC_PARENT"&gt;
				generic_parameters = &lt;"SUPPLIER_A", "SUPPLIER_B"&gt;
			&gt;
		&gt;
		properties = &lt;
			["gen_child_closed_prop"] = (P_BMM_SINGLE_PROPERTY) &lt;
				name = &lt;"gen_child_closed_prop"&gt;
				type = &lt;"String"&gt;
			&gt;
		&gt;
	&gt;

&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-12-15 08:31:14 UTC
</div>
</div>
</body>
</html>